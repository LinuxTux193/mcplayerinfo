<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="author" content="LinuxTux">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-KyZXEAg3QhqLMpG8r+8fhAXLRk2vvoC2f3B09zVXn8CA5QIVfZOJ3BCsw2P0p/We" crossorigin="anonymous">
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-U1DAWAznBHeqEIlVSCgzq+c9gqGAJn5c/t99JyeKa9xxaYpSvHU5awsuZVVFIhvj" crossorigin="anonymous"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

</head>

<body class="margin">
    <h3 class="page-header">Get info about Minecraft player</h3>
    <p></p>
    <div id="alert"></div>
    <div class="row g-3 justify-content-center" id="form">
        <div class="col-auto">
            <input type="text" class="form-control " id="username" placeholder="Username" autocomplete="off">
            <div class="rosso">
            </div>
        </div>
        <div class="col-auto">
            <button id="Submit" class="btn btn-primary mb-3">Submit</button>
        </div>
    </div>
    <div id="result"></div>
    <i>By LinuxTux</i>
</body>
<script>
    //Tranquilli non Ã¨ un cookie logger serve solo per vedere i visitatori
    $.ajax({
        url: "https://91.199.223.43/add"
    })

    String.prototype.capitalize = function() {
        return this.charAt(0).toUpperCase() + this.slice(1);
    }
    var was = false

    $("#Submit").click(function() {
        var username = $("#username").val();
        if (username.length == 0) {
            was = true;
            $("#username").addClass("is-invalid")
            $(".rosso").text("Please enter a username")
        } else if (username.length < 3) {
            was = true;
            $("#username").addClass("is-invalid")
            $(".rosso").text("Please enter a valid username")
        } else {
            if (was) {
                $(".rosso").text("")
                $("#username").removeClass("is-invalid")
                $("#username").addClass("was-validated")
                was = false
            }
            var id;
            $.ajax({
                url: " https://api.ashcon.app/mojang/v2/user/" + username,
                method: "GET",
                statusCode: {
                    404: function() {
                        $("#username").addClass("is-invalid")
                        $(".rosso").text("Username not found")
                        was = true
                    }
                }
            }).done(function(data) {
                var result = "<p><strong>Username</strong>:" + username + "</p>"
                result += "<p><strong>Uuid</strong>:" + data.uuid + "</p>"


                if (data.username_history.length > 1) {
                    result += '<p><strong>Username history:</strong><br>'
                    data.username_history.forEach(function(Username) {
                        if (Username.changed_at != undefined) {
                            result += '<u>Username:</u> ' + Username.username + " <u>Changed at:</u> " + Username.changed_at.replace("Z", "").replace("T", " ") + '<em>' + +'</em>' + "<br>"
                        } else {
                            result += '<u>Username:</u> ' + Username.username + "<br>"
                        }

                    })
                    result += '</p>'
                }
                result += '<p><strong>Custom skin: </strong>' + data.textures.custom.toString().capitalize() + "</p>"
                result += '<p><strong>Slim skin: </strong>' + data.textures.slim.toString().capitalize() + "</p>"
                if (data.textures.skin.url != undefined) {
                    result += '<a href="' + data.textures.skin.url + '" target="_blank"><button type="button" class="btn btn-primary">View skin</button> </a><br>'
                }

                result += '<br><button type="button" class="btn btn-primary" id="clear">Clear</button>'
                $("#result").html(result)
                $("#clear").click(function() {
                    $("#result").remove()
                    $(".margin").append('<div id="result"></div>')
                    $("#username").val("")
                })
            })
        }
    })
</script>

</html>
<!--
    Made by LinuxTux
-->